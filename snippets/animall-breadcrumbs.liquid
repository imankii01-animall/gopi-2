{%- comment -%}
  Breadcrumbs with Schema.org BreadcrumbList markup.
  Renders on product, collection, page, blog, and article pages.
  Include via: {% render 'animall-breadcrumbs' %}
{%- endcomment -%}

{%- assign show_breadcrumbs = false -%}
{%- if request.page_type == 'product' or request.page_type == 'collection' or request.page_type == 'page' or request.page_type == 'blog' or request.page_type == 'article' -%}
  {%- assign show_breadcrumbs = true -%}
{%- endif -%}

{%- if show_breadcrumbs -%}
<nav class="ag-breadcrumbs" aria-label="Breadcrumb">
  <ol class="ag-breadcrumbs-list" itemscope itemtype="https://schema.org/BreadcrumbList">

    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a href="{{ routes.root_url }}" itemprop="item">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content="1">
    </li>

    {%- case request.page_type -%}

      {%- when 'collection' -%}
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
          <span itemprop="name">{{ collection.title }}</span>
          <meta itemprop="item" content="{{ request.origin }}{{ collection.url }}">
          <meta itemprop="position" content="2">
        </li>

      {%- when 'product' -%}
        {%- if collection -%}
          <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ collection.url }}" itemprop="item">
              <span itemprop="name">{{ collection.title }}</span>
            </a>
            <meta itemprop="position" content="2">
          </li>
          <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
            <span itemprop="name">{{ product.title }}</span>
            <meta itemprop="item" content="{{ request.origin }}{{ product.url }}">
            <meta itemprop="position" content="3">
          </li>
        {%- else -%}
          <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
            <span itemprop="name">{{ product.title }}</span>
            <meta itemprop="item" content="{{ request.origin }}{{ product.url }}">
            <meta itemprop="position" content="2">
          </li>
        {%- endif -%}

      {%- when 'page' -%}
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
          <span itemprop="name">{{ page.title }}</span>
          <meta itemprop="item" content="{{ request.origin }}{{ page.url }}">
          <meta itemprop="position" content="2">
        </li>

      {%- when 'blog' -%}
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
          <span itemprop="name">{{ blog.title }}</span>
          <meta itemprop="item" content="{{ request.origin }}{{ blog.url }}">
          <meta itemprop="position" content="2">
        </li>

      {%- when 'article' -%}
        {%- if blog -%}
          <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a href="{{ blog.url }}" itemprop="item">
              <span itemprop="name">{{ blog.title }}</span>
            </a>
            <meta itemprop="position" content="2">
          </li>
          <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
            <span itemprop="name">{{ article.title }}</span>
            <meta itemprop="item" content="{{ request.origin }}{{ article.url }}">
            <meta itemprop="position" content="3">
          </li>
        {%- else -%}
          <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
            <span itemprop="name">{{ article.title }}</span>
            <meta itemprop="item" content="{{ request.origin }}{{ article.url }}">
            <meta itemprop="position" content="2">
          </li>
        {%- endif -%}

    {%- endcase -%}
  </ol>
</nav>
{%- endif -%}
